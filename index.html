<!--
     This page is used to render all mathdown documents, using URLs such as
     http://mathdown.net/?doc=iYrTultCuy6

     See https://github.com/cben/mathdown/issues/6 and
     https://github.com/cben/mathdown/issues/10 about security of
     having (secret) doc ID in server-visible part of URL.

     Currently the doc id is only parsed client-side but that should
     change for https://github.com/cben/mathdown/issues/7.
-->
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Collaborative editing + in-place math</title>

    <script src="CodeMirror/lib/codemirror.js"></script>
    <script src="CodeMirror/mode/markdown/markdown.js"></script>
    <script src="CodeMirror-MathJax/render-math.js"></script>

    <link rel="stylesheet" href="CodeMirror/lib/codemirror.css">

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true,
          preview: "none"
        },
      });
    </script>
    <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.2-latest/unpacked/MathJax.js?config=TeX-AMS_HTML-full,Safe"></script>

    <script src="https://cdn.firebase.com/v0/firebase.js"></script>
    <!-- hack: use prebuilt example/firepad.js to allow running directly from git -->
    <script src="firepad/examples/firepad.js"></script>
    <link rel="stylesheet" href="firepad/examples/firepad.css"/>

    <style>
      #logo {
        color: black; text-decoration: none;  /* Don't look like a link */
        display: inline-block; width: 4em;
      }
      .warning { color: orange; }

      @media print { #header { display: none; } }

      #content { clear: both; }
      @media screen { .CodeMirror { border: 1px solid silver; } }
      @media print { .CodeMirror { border: 1px none; } }

      /* Font choices based on Math.SE: http://graphicdesign.stackexchange.com/a/12961 */
      .CodeMirror { font-family: Georgia, "Bitstream Charter", "Times New Roman", Times, serif; }
      .cm-header { font-size: 150%; line-height: 200%; }
      /* markdown mode styles `...` and indented code blocks as "comment". */
      .CodeMirror .cm-comment { font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;  }
      /* exclude math from monospace style to avoid mathjax vertically
         squishing formulas, especially display. */
      .CodeMirror .math.cm-comment { font-family: serif; }

      /* Override fixed size from firepad.css */
      .firepad { height: 100%; }
      .firepad .CodeMirror { position: relative; }
    </style>
  </head>

  <body class="tex2jax_ignore">
    <!-- TODO: clean content/CSS. -->
    <div id="header">
      <a href="?doc=about" target="_blank" class="tex2jax_process" id="logo">
        $\binom{\mathcal{Math}}{\text{down}}$
      </a>
      <h1 style="display: inline">
        Collaborative markdown + math |
        <a href="https://github.com/cben/mathdown/issues" class="warning">
          ⚠ Alpha quality! ⚠
        </a>
        <span style="float: right">
          <a href="?doc=help" target="_blank">Help</a> |
          <a href="javascript:newPad()">New document</a>
        </span>
      </h1>
    </div>

    <form id="content"><textarea id="code" name="code"></textarea></form>
    <script src="mathdown.js"></script>
  </body>
</html>
